{% extends "base.html" %}

{% block title %}Анкеты - Наир{% endblock %}

{% block content %}
<!-- Левая панель - меню -->
<nav class="original-nav">
  <ul class="nav-list">
    <li class="nav-item">
        <input type="text" id="search" placeholder="Поиск..." autocomplete="off" class="search-input" />
        <div id="suggestions" class="suggestions"></div>
    </li>
    <li class="nav-item"><a href="index.html" class="nav-link">Главная</a></li>
    <li class="nav-item"><a href="karta.html" class="nav-link">Карта</a></li>
    <li class="nav-item"><a href="lor.html" class="nav-link">Лор</a></li>
    <li class="nav-item"><a href="ankety.html" class="nav-link active">Анкеты</a></li>
  </ul>
</nav>

<!-- Правый блок - основной контент -->
<main class="original-main">
  <div class="ankety-container">
    <h1 class="page-title">ПЕРСОНАЖИ ИГРОКОВ</h1>
    
    <div class="characters-grid">
      <!-- Карточка Малдис Канталия -->
      <div class="character-card" data-character="maldys">
        <img src="static/photo/character-art/maldys.jpg" alt="Малдис Канталия" class="character-art">
        <div class="character-info">
          <div class="character-name">Малдис Канталия</div>
          <div class="character-race">Человек, Граальд</div>
        </div>
        
        <!-- Детали анкеты (скрыты по умолчанию) -->
        <div class="character-details">
          <!-- Быстрая информация слева -->
          <div class="quick-info">
            <div class="owner-link">
              Владелец: <a href="https://vk.com/id123456789" target="_blank">Николай Шахов</a>
            </div>
            
            <div class="basic-info-grid">
              <div class="info-item">
                <span class="info-label">Имя:</span>
                <span class="info-value">Малдис Канталия</span>
              </div>
              <div class="info-item">
                <span class="info-label">Раса:</span>
                <span class="info-value">Человек, Граальд</span>
              </div>
              <div class="info-item">
                <span class="info-label">Возраст:</span>
                <span class="info-value">28 лет</span>
              </div>
              <div class="info-item">
                <span class="info-label">Статус:</span>
                <span class="info-value">Офицер Корвуса</span>
              </div>
              <div class="info-item">
                <span class="info-label">Стиль боя:</span>
                <span class="info-value">Боевой маг</span>
              </div>
              <div class="info-item">
                <span class="info-label">Специализация:</span>
                <span class="info-value">Пространственная магия</span>
              </div>
            </div>
          </div>
          
          <!-- Навигационные ссылки -->
          <div class="section-nav">
            <a class="nav-link" data-section="vneshnost">Внешность</a>
            <a class="nav-link" data-section="harakter">Характер</a>
            <a class="nav-link" data-section="istoriya">История</a>
            <a class="nav-link" data-section="sposobnosti">Способности</a>
            <a class="nav-link" data-section="fizika">Физические параметры</a>
            <a class="nav-link" data-section="prochee">Прочие особенности</a>
          </div>
          
          <!-- Аккордеоны -->
          <div class="accordions-container">
            <!-- Внешность -->
            <div class="accordion-section" id="section-vneshnost">
              <div class="accordion-header" data-target="vneshnost">
                <h4>Описание внешности</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="vneshnost">
                <p>Описание внешности персонажа будет здесь...</p>
              </div>
            </div>
            
            <!-- Характер -->
            <div class="accordion-section" id="section-harakter">
              <div class="accordion-header" data-target="harakter">
                <h4>Характер</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="harakter">
                <p>Старается следовать законам и правилам, но часто ставит справедливость (в своем понимании) выше закона. Дворянка, обладает всеми сопутствующими умениями, печется о репутации своего рода. В большинстве случаев старается помогать окружающим. Ревностно почитает и крайне предана императрице Арайе Брей, а потому не потерпит неуважительных высказываний в ее сторону. Малдис колеблется в дальнейших целях в жизни между карьерой специалиста-мага в магическом институте и военной службой Корвусу.</p>
              </div>
            </div>
            
            <!-- История -->
            <div class="accordion-section" id="section-istoriya">
              <div class="accordion-header" data-target="istoriya">
                <h4>История</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="istoriya">
                <p>Был договор между Корвусом и одним из магических институтов, согласно которому одаренных магией отпрысков знати отправляли учиться магии, с тем чтобы по завершению обучения те вернулись на родину и отслужили определенное время на благо империи. Целью обучения боевых магов- было хоть немного увеличить количество специалистов-заклинателей на службе империи. Малдис была одной из таких. Хоть ее и научили всем основным премудростям, которые должна уметь аристократка, большую часть времени она провела в стенах магического института, вдали от дома. Малдис лишь пару лет назад вернулась на родину, где ее сделали офицером.</p>
                
                <p>Авантюристы ненадежны, жадны и не слишком эффективны. Вспомогательные сотни- это те же авантюристы, только получающие регулярное жалование и питание, а также они могут рассчитывать на выдачу снаряжения и какую-никакую помощь лекарей. Обратной стороной медали является то, что вспомогательные войска не могут сами выбирать себе задания и не могут отказаться от заданий, которые выдает им начальство, а конкретно лично Малдис. Кроме того, они вынуждены следовать воинскому кодексу и нести наказания за его нарушение , поскольку формально являются не горсткой авантюристов, а частью армии Корвуса.</p>
              </div>
            </div>
            
            <!-- Способности -->
            <div class="accordion-section" id="section-sposobnosti">
              <div class="accordion-header" data-target="sposobnosti">
                <h4>Способности</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="sposobnosti">
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Телекинез <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p><strong>Основное и любимое заклинание</strong> - оперируя магией подпространства, Малдис может силой мысли поднимать и манипулировать объектами на расстоянии до 50 метров, как будто они находятся в ее руке.</p>
                    <p><strong>Ограничения:</strong> Максимальный вес поднятия одной рукой соответствует 40 кг. Суммарно за день Малдис может использовать телекинез не более получаса.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Скачек <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис может переместиться на расстояние до 100 метров в точку, которую видит.</p>
                    <p><strong>Ограничения:</strong> Всего у Малдис пять зарядов, для восстановления каждого из которых нужно ни меньше часа.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Карманное подпространство <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис может создать "пространственный карман" который способен вместить до 200 кг веса.</p>
                    <p><strong>Особенности:</strong> Малдис не может создать более одного подпространства и пользоваться им может только она.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Ветряная сфера <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>К выбранному объекту привязывается ветряная сфера радиусом в пять метров.</p>
                    <p><strong>Длительность:</strong> Существует в течении получаса, может начать закручиваться, создавая ветряной поток.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Призыв элементаля <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис тратит минуту призывая элементаля ветра.</p>
                    <p><strong>Характеристики:</strong> Элементаль живет в течении часа и повторный призыв возможен через 8 часов.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Удар сквозь пространство <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Раз в день Малдис может нанести удар клинком, рукой, ногой или любой другой частью тела - проходящей сквозь пространство.</p>
                    <p><strong>Ограничения:</strong> Заклинание действует до 6 секунд.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Физические параметры -->
            <div class="accordion-section" id="section-fizika">
              <div class="accordion-header" data-target="fizika">
                <h4>Физические параметры</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="fizika">
                <p>Малдис обучена ношению тяжелой брони и владеет копьем и мечом на достаточном уровне, чтобы обучать знающих базовые основы солдат более продвинутым навыкам. Однако сама по себе не является мастером и навряд ли прошла бы отбор в условную гвардию.</p>
                
                <p>Как и все граальды, она хрупка (в сравнении с другими расами) и обладает всеми сопутствующими уязвимостями, а ее магические навыки можно законтрить даже не обладая магией, нанеся достаточный урон конечностям.</p>
              </div>
            </div>
            
            <!-- Прочие особенности -->
            <div class="accordion-section" id="section-prochee">
              <div class="accordion-header" data-target="prochee">
                <h4>Прочие особенности</h4>
                <span class="accordion-icon">▼</span>
              </div>
              <div class="accordion-content" id="prochee">
                <p>Офицер армии Корвуса, временно исполняющая обязанности командира вспомогательных войск, имеет начальника в лице придворного мага Императрицы. Может получать золото от начальства на нужды войск, но не может использовать их для собственного усиления, т.к отчитывается за каждый златник. Может вербовать в вспомогательные войска других персонажей при их желании.</p>
              </div>
            </div>
          </div>
        </div>
        
        <button class="close-btn">×</button>
      </div>
      
      <!-- Пример других анкет (можно добавить больше) -->
      <div class="character-card">
        <img src="static/photo/character-art/placeholder.jpg" alt="Персонаж 2" class="character-art">
        <div class="character-info">
          <div class="character-name">Элриндор</div>
          <div class="character-race">Эльф</div>
        </div>
      </div>
      
      <div class="character-card">
        <img src="static/photo/character-art/placeholder.jpg" alt="Персонаж 3" class="character-art">
        <div class="character-info">
          <div class="character-name">Громдар</div>
          <div class="character-race">Дварф</div>
        </div>
      </div>
      
      <!-- Добавьте больше карточек по аналогии -->
    </div>
  </div>
  
  <!-- Оверлей для затемнения фона -->
  <div class="overlay"></div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const characterCards = document.querySelectorAll('.character-card');
  const overlay = document.querySelector('.overlay');
  
  // Открытие карточки
  characterCards.forEach(card => {
    card.addEventListener('click', function(e) {
      if (!this.classList.contains('expanded') && !e.target.classList.contains('close-btn')) {
        // Закрываем другие открытые карточки
        document.querySelectorAll('.character-card.expanded').forEach(openCard => {
          openCard.classList.remove('expanded');
        });
        
        // Открываем текущую
        this.classList.add('expanded');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    });
  });
  
  // Закрытие карточки
  function closeCard() {
    document.querySelectorAll('.character-card.expanded').forEach(card => {
      card.classList.remove('expanded');
    });
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  // Закрытие по крестику
  document.querySelectorAll('.close-btn').forEach(btn => {
    btn.addEventListener('click', closeCard);
  });
  
  // Закрытие по оверлею
  overlay.addEventListener('click', closeCard);
  
  // Закрытие по ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeCard();
    }
  });
  
  // Аккордеоны
  const accordionHeaders = document.querySelectorAll('.accordion-header');
  accordionHeaders.forEach(header => {
    header.addEventListener('click', function() {
      const targetId = this.getAttribute('data-target');
      const content = document.getElementById(targetId);
      const isActive = content.classList.contains('active');
      
      // Закрываем все аккордеоны
      document.querySelectorAll('.accordion-content').forEach(acc => {
        acc.classList.remove('active');
      });
      document.querySelectorAll('.accordion-header').forEach(h => {
        h.classList.remove('active');
      });
      
      // Открываем текущий, если был закрыт
      if (!isActive) {
        content.classList.add('active');
        this.classList.add('active');
        
        // Прокручиваем к открытому аккордеону
        content.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    });
  });
  
  // Навигационные ссылки - прокрутка к секциям
  const navLinks = document.querySelectorAll('.nav-link[data-section]');
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const sectionId = this.getAttribute('data-section');
      const sectionElement = document.getElementById(`section-${sectionId}`);
      const accordionHeader = document.querySelector(`.accordion-header[data-target="${sectionId}"]`);
      
      if (sectionElement && accordionHeader) {
        // Открываем аккордеон
        accordionHeader.click();
        
        // Плавная прокрутка к секции
        setTimeout(() => {
          sectionElement.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start'
          });
        }, 300);
      }
    });
  });
  
  // Аккордеоны способностей
  const abilityHeaders = document.querySelectorAll('.ability-header');
  abilityHeaders.forEach(header => {
    header.addEventListener('click', function() {
      const description = this.nextElementSibling;
      description.classList.toggle('active');
    });
  });
});
</script>
{% endblock %}