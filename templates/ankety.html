{% extends "base.html" %}

{% block title %}Анкеты - Наир{% endblock %}

{% block content %}
<!-- Левая панель - меню -->
<nav class="original-nav">
  <ul class="nav-list">
    <li class="nav-item">
        <input type="text" id="search" placeholder="Поиск..." autocomplete="off" class="search-input" />
        <div id="suggestions" class="suggestions"></div>
    </li>
    <li class="nav-item"><a href="index.html" class="nav-link">Главная</a></li>
    <li class="nav-item"><a href="karta.html" class="nav-link">Карта</a></li>
    <li class="nav-item"><a href="lor.html" class="nav-link">Лор</a></li>
    <li class="nav-item"><a href="ankety.html" class="nav-link active">Анкеты</a></li>
  </ul>
</nav>

<!-- Правый блок - основной контент -->
<main class="original-main">
  <div class="ankety-container">
    <h1 class="page-title">ПЕРСОНАЖИ ИГРОКОВ</h1>
    
    <div class="characters-grid">
      <!-- Карточка Малдис Канталия -->
      <div class="character-card" data-character="maldys">
        <img src="static/photo/character-art/maldys.jpg" alt="Малдис Канталия" class="character-art">
        <div class="character-info">
          <div class="character-name">Малдис Канталия</div>
          <div class="character-race">Человек, Граальд</div>
        </div>
        
        <!-- Детали анкеты (скрыты по умолчанию) -->
        <div class="character-details">
          <!-- Шапка анкеты -->
          <div class="character-header">
            <div class="character-main-info">
              <div class="character-text-info">
                <h1 class="character-title">Малдис Канталия</h1>
                <div class="character-subtitle">
                  Офицер армии Корвуса, боевой маг специализирующийся на пространственной магии
                </div>
                
                <!-- Основные факты с чекбоксами -->
                <div class="character-facts">
                  <div class="fact-item">
                    <div class="fact-checkbox"></div>
                    <span class="fact-label">Владелец:</span>
                    <span class="fact-value">Николай Шахов</span>
                  </div>
                  <div class="fact-item">
                    <div class="fact-checkbox checked"></div>
                    <span class="fact-label">Имя:</span>
                    <span class="fact-value">Малдис Канталия</span>
                  </div>
                  <div class="fact-item">
                    <div class="fact-checkbox checked"></div>
                    <span class="fact-label">Раса:</span>
                    <span class="fact-value">Человек, Граальд</span>
                  </div>
                  <div class="fact-item">
                    <div class="fact-checkbox checked"></div>
                    <span class="fact-label">Возраст:</span>
                    <span class="fact-value">28 лет</span>
                  </div>
                  <div class="fact-item">
                    <div class="fact-checkbox"></div>
                    <span class="fact-label">Избранный бога:</span>
                    <span class="fact-value">Нет</span>
                  </div>
                </div>
              </div>
              
              <img src="static/photo/character-art/maldys.jpg" alt="Малдис Канталия" class="character-art-expanded">
            </div>
          </div>
          
          <!-- Содержание -->
          <div class="character-toc">
            <div class="toc-title">Содержание</div>
            <div class="toc-items">
              <div class="toc-item" data-section="vneshnost">
                <div class="toc-checkbox"></div>
                <span class="toc-label">Описание внешности</span>
              </div>
              <div class="toc-item" data-section="harakter">
                <div class="toc-checkbox"></div>
                <span class="toc-label">Характер</span>
              </div>
              <div class="toc-item" data-section="istoriya">
                <div class="toc-checkbox"></div>
                <span class="toc-label">История</span>
              </div>
              <div class="toc-item" data-section="sposobnosti">
                <div class="toc-checkbox"></div>
                <span class="toc-label">Способности</span>
              </div>
              <div class="toc-item" data-section="fizika">
                <div class="toc-checkbox"></div>
                <span class="toc-label">Физические параметры</span>
              </div>
              <div class="toc-item" data-section="prochee">
                <div class="toc-checkbox"></div>
                <span class="toc-label">Прочие особенности</span>
              </div>
            </div>
          </div>
          
          <!-- Контент секций -->
          <div class="character-content">
            <!-- Внешность -->
            <div class="character-section active" id="content-vneshnost">
              <h2 class="section-title">Описание внешности</h2>
              <div class="section-content">
                <p>Описание внешности персонажа будет здесь...</p>
              </div>
            </div>
            
            <!-- Характер -->
            <div class="character-section" id="content-harakter">
              <h2 class="section-title">Характер</h2>
              <div class="section-content">
                <p>Старается следовать законам и правилам, но часто ставит справедливость (в своем понимании) выше закона. Дворянка, обладает всеми сопутствующими умениями, печется о репутации своего рода. В большинстве случаев старается помогать окружающим. Ревностно почитает и крайне предана императрице Арайе Брей, а потому не потерпит неуважительных высказываний в ее сторону. Малдис колеблется в дальнейших целях в жизни между карьерой специалиста-мага в магическом институте и военной службой Корвусу.</p>
              </div>
            </div>
            
            <!-- История -->
            <div class="character-section" id="content-istoriya">
              <h2 class="section-title">История</h2>
              <div class="section-content">
                <p>Был договор между Корвусом и одним из магических институтов, согласно которому одаренных магией отпрысков знати отправляли учиться магии, с тем чтобы по завершению обучения те вернулись на родину и отслужили определенное время на благо империи. Целью обучения боевых магов- было хоть немного увеличить количество специалистов-заклинателей на службе империи. Малдис была одной из таких. Хоть ее и научили всем основным премудростям, которые должна уметь аристократка, большую часть времени она провела в стенах магического института, вдали от дома. Малдис лишь пару лет назад вернулась на родину, где ее сделали офицером.</p>
                
                <p>Авантюристы ненадежны, жадны и не слишком эффективны. Вспомогательные сотни- это те же авантюристы, только получающие регулярное жалование и питание, а также они могут рассчитывать на выдачу снаряжения и какую-никакую помощь лекарей. Обратной стороной медали является то, что вспомогательные войска не могут сами выбирать себе задания и не могут отказаться от заданий, которые выдает им начальство, а конкретно лично Малдис. Кроме того, они вынуждены следовать воинскому кодексу и нести наказания за его нарушение , поскольку формально являются не горсткой авантюристов, а частью армии Корвуса.</p>
              </div>
            </div>
            
            <!-- Способности -->
            <div class="character-section" id="content-sposobnosti">
              <h2 class="section-title">Способности</h2>
              <div class="section-content">
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Телекинез <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p><strong>Основное и любимое заклинание</strong> - оперируя магией подпространства, Малдис может силой мысли поднимать и манипулировать объектами на расстоянии до 50 метров, как будто они находятся в ее руке.</p>
                    <p><strong>Ограничения:</strong> Максимальный вес поднятия одной рукой соответствует 40 кг. Суммарно за день Малдис может использовать телекинез не более получаса.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Скачек <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис может переместиться на расстояние до 100 метров в точку, которую видит.</p>
                    <p><strong>Ограничения:</strong> Всего у Малдис пять зарядов, для восстановления каждого из которых нужно ни меньше часа.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Карманное подпространство <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис может создать "пространственный карман" который способен вместить до 200 кг веса.</p>
                    <p><strong>Особенности:</strong> Малдис не может создать более одного подпространства и пользоваться им может только она.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Ветряная сфера <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>К выбранному объекту привязывается ветряная сфера радиусом в пять метров.</p>
                    <p><strong>Длительность:</strong> Существует в течении получаса, может начать закручиваться, создавая ветряной поток.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Призыв элементаля <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Малдис тратит минуту призывая элементаля ветра.</p>
                    <p><strong>Характеристики:</strong> Элементаль живет в течении часа и повторный призыв возможен через 8 часов.</p>
                  </div>
                </div>
                
                <div class="ability-accordion">
                  <div class="ability-header">
                    <div class="ability-name">Удар сквозь пространство <span>▼</span></div>
                  </div>
                  <div class="ability-description">
                    <p>Раз в день Малдис может нанести удар клинком, рукой, ногой или любой другой частью тела - проходящей сквозь пространство.</p>
                    <p><strong>Ограничения:</strong> Заклинание действует до 6 секунд.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Физические параметры -->
            <div class="character-section" id="content-fizika">
              <h2 class="section-title">Физические параметры</h2>
              <div class="section-content">
                <p>Малдис обучена ношению тяжелой брони и владеет копьем и мечом на достаточном уровне, чтобы обучать знающих базовые основы солдат более продвинутым навыкам. Однако сама по себе не является мастером и навряд ли прошла бы отбор в условную гвардию.</p>
                
                <p>Как и все граальды, она хрупка (в сравнении с другими расами) и обладает всеми сопутствующими уязвимостями, а ее магические навыки можно законтрить даже не обладая магией, нанеся достаточный урон конечностям.</p>
              </div>
            </div>
            
            <!-- Прочие особенности -->
            <div class="character-section" id="content-prochee">
              <h2 class="section-title">Прочие особенности</h2>
              <div class="section-content">
                <p>Офицер армии Корвуса, временно исполняющая обязанности командира вспомогательных войск, имеет начальника в лице придворного мага Императрицы. Может получать золото от начальства на нужды войск, но не может использовать их для собственного усиления, т.к отчитывается за каждый златник. Может вербовать в вспомогательные войска других персонажей при их желании.</p>
              </div>
            </div>
          </div>
        </div>
        
        <button class="close-btn">×</button>
      </div>
      
      <!-- Пример других анкет (можно добавить больше) -->
      <div class="character-card">
        <img src="static/photo/character-art/placeholder.jpg" alt="Персонаж 2" class="character-art">
        <div class="character-info">
          <div class="character-name">Элриндор</div>
          <div class="character-race">Эльф</div>
        </div>
      </div>
      
      <div class="character-card">
        <img src="static/photo/character-art/placeholder.jpg" alt="Персонаж 3" class="character-art">
        <div class="character-info">
          <div class="character-name">Громдар</div>
          <div class="character-race">Дварф</div>
        </div>
      </div>
      
      <!-- Добавьте больше карточек по аналогии -->
    </div>
  </div>
  
  <!-- Оверлей для затемнения фона -->
  <div class="overlay"></div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const characterCards = document.querySelectorAll('.character-card');
  const overlay = document.querySelector('.overlay');
  
  // Открытие карточки
  characterCards.forEach(card => {
    card.addEventListener('click', function(e) {
      if (!this.classList.contains('expanded') && !e.target.classList.contains('close-btn')) {
        // Закрываем другие открытые карточки
        document.querySelectorAll('.character-card.expanded').forEach(openCard => {
          openCard.classList.remove('expanded');
        });
        
        // Открываем текущую
        this.classList.add('expanded');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    });
  });
  
  // Закрытие карточки
  function closeCard() {
    document.querySelectorAll('.character-card.expanded').forEach(card => {
      card.classList.remove('expanded');
    });
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  // Закрытие по крестику
  document.querySelectorAll('.close-btn').forEach(btn => {
    btn.addEventListener('click', closeCard);
  });
  
  // Закрытие по оверлею
  overlay.addEventListener('click', closeCard);
  
  // Закрытие по ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeCard();
    }
  });
  
  // Функциональность для чекбоксов
  function initCharacterCheckboxes() {
    // Чекбоксы фактов
    const factCheckboxes = document.querySelectorAll('.fact-checkbox');
    factCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('click', function() {
        this.classList.toggle('checked');
      });
    });
    
    // Чекбоксы содержания
    const tocItems = document.querySelectorAll('.toc-item');
    tocItems.forEach(item => {
      item.addEventListener('click', function() {
        const checkbox = this.querySelector('.toc-checkbox');
        const sectionId = this.getAttribute('data-section');
        
        // Переключаем чекбокс
        checkbox.classList.toggle('checked');
        
        // Показываем секцию
        showCharacterSection(sectionId);
      });
    });
  }

  function showCharacterSection(sectionId) {
    // Скрываем все секции
    document.querySelectorAll('.character-section').forEach(section => {
      section.classList.remove('active');
    });
    
    // Показываем выбранную секцию
    const targetSection = document.getElementById(`content-${sectionId}`);
    if (targetSection) {
      targetSection.classList.add('active');
      
      // Прокрутка к секции
      targetSection.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'start' 
      });
    }
  }

  // Инициализация чекбоксов
  initCharacterCheckboxes();
  
  // Аккордеоны способностей
  const abilityHeaders = document.querySelectorAll('.ability-header');
  abilityHeaders.forEach(header => {
    header.addEventListener('click', function() {
      const description = this.nextElementSibling;
      description.classList.toggle('active');
    });
  });
});
</script>
{% endblock %}